# Введение

### Цель работы:
Создание и управление базой данных для клиники с использованием языка SQL. Проект включает проектирование структуры базы данных, создание таблиц, заполнение данных и выполнение различных запросов для управления и анализа данных.

### Описание:
Этот проект предназначен для демонстрации навыков работы с реляционными базами данных с использованием SQL. База данных включает информацию о пациентах, врачах, заболеваниях, приёмах и диагнозах.

# Структура базы данных

## Таблицы:

### ПАЦИЕНТ (Пациенты клиники)
```
ID_Пациента: INT, PRIMARY KEY, AUTO_INCREMENT
ФИО: VARCHAR(100)
СНИЛС: VARCHAR(50)
```
### ВРАЧ (Врачи клиники)
```
ID_Врача: INT, PRIMARY KEY, AUTO_INCREMENT
ФИО: VARCHAR(100)
Специализация: VARCHAR(50)
```
### ЗАБОЛЕВАНИЕ (Справочник заболеваний)
```
Код_Заболевания: INT, PRIMARY KEY, AUTO_INCREMENT
Расшифровка: VARCHAR(255)
```
### ПРИЁМ (Записи о приёмах пациентов у врачей)
```
Пациент: INT, FOREIGN KEY, REFERENCES ПАЦИЕНТ(ID_Пациента)
Врач: INT, FOREIGN KEY, REFERENCES ВРАЧ(ID_Врача)
Дата_приёма: DATETIME
PRIMARY KEY (Пациент, Врач, Дата_приёма)
```
### ДИАГНОЗ (Диагнозы, поставленные пациентам)
```
Пациент: INT, FOREIGN KEY, REFERENCES ПАЦИЕНТ(ID_Пациента)
Врач: INT, FOREIGN KEY, REFERENCES ВРАЧ(ID_Врача)
Код_заболевания: INT, FOREIGN KEY, REFERENCES ЗАБОЛЕВАНИЕ(Код_Заболевания)
PRIMARY KEY (Пациент, Врач, Код_заболевания)
```

# Реализация

## Создание базы данных и таблиц:
```
CREATE DATABASE clinic;
USE clinic;
```
## Создание таблицы ПАЦИЕНТ:
```
CREATE TABLE ПАЦИЕНТ (
    ID_Пациента INT NOT NULL AUTO_INCREMENT,
    ФИО VARCHAR(100) NOT NULL,
    СНИЛС VARCHAR(50) NOT NULL,
    PRIMARY KEY (ID_Пациента)
);
```
### Заполнение таблицы ПАЦИЕНТ:
```
INSERT INTO ПАЦИЕНТ (ФИО, СНИЛС)
VALUES
    ('Иванов Иван Иванович', '123-456-789 01'),
    ('Петров Петр Петрович', '234-567-890 12'),
    ('Сидорова Елена Владимировна', '345-678-901 23'),
    ('Козлова Ольга Петровна', '456-789-012 34'),
    ('Николаева Анна Алексеевна', '567-890-123 45'),
    ('Кузнецов Дмитрий Сергеевич', '678-901-234 56'),
    ('Васильева Марина Игоревна', '789-012-345 67'),
    ('Лебедев Алексей Александрович', '890-123-456 78'),
    ('Соколов Игорь Викторович', '901-234-567 89'),
    ('Морозова Наталья Васильевна', '012-345-678 90');
```
## Создание таблицы ВРАЧ:
```
CREATE TABLE ВРАЧ (
    ID_Врача INT NOT NULL AUTO_INCREMENT,
    ФИО VARCHAR(100) NOT NULL,
    Специализация VARCHAR(50) NOT NULL,
    PRIMARY KEY (ID_Врача)
);
```
### Заполнение таблицы ВРАЧ:
```
INSERT INTO ВРАЧ (ФИО, Специализация)
VALUES
    ('Петрова Анна Ивановна', 'Терапевт'),
    ('Смирнов Иван Петрович', 'Окулист'),
    ('Козлова Елена Сергеевна', 'Хирург'),
    ('Иванов Дмитрий Алексеевич', 'Педиатр'),
    ('Соколова Ольга Викторовна', 'Невролог'),
    ('Николаев Алексей Васильевич', 'Кардиолог'),
    ('Медведева Марина Дмитриевна', 'Эндокринолог'),
    ('Васильев Игорь Александрович', 'Гинеколог'),
    ('Попова Наталья Игоревна', 'Уролог'),
    ('Кузнецов Александр Степанович', 'Отоларинголог');
```
## Создание таблицы ЗАБОЛЕВАНИЕ:
```
CREATE TABLE ЗАБОЛЕВАНИЕ (
    Код_Заболевания INT NOT NULL AUTO_INCREMENT,
    Расшифровка VARCHAR(255) NOT NULL,
    PRIMARY KEY (Код_Заболевания)
);
```
### Заполнение таблицы ЗАБОЛЕВАНИЕ:
```
INSERT INTO ЗАБОЛЕВАНИЕ (Расшифровка)
VALUES
    ('Грипп'),
    ('Катаракта'),
    ('Аппендицит'),
    ('Гастрит'),
    ('Мигрень'),
    ('Ишемическая болезнь сердца'),
    ('Диабет'),
    ('Миома матки'),
    ('Простуда'),
    ('Остеохондроз');
```
## Создание таблицы ПРИЁМ:
```
CREATE TABLE ПРИЁМ (
    Пациент INT NOT NULL,
    Врач INT NOT NULL,
    Дата_приёма DATETIME NOT NULL,
    FOREIGN KEY (Пациент) REFERENCES ПАЦИЕНТ(ID_Пациента),
    FOREIGN KEY (Врач) REFERENCES ВРАЧ(ID_Врача),
    PRIMARY KEY (Пациент, Врач, Дата_приёма)
);
```
### Заполнение таблицы ПРИЁМ:
```
INSERT INTO ПРИЁМ (Пациент, Врач, Дата_приёма)
VALUES
    (1, 2, '2024-06-15 10:00:00'),
    (2, 4, '2024-06-16 11:30:00'),
    (3, 6, '2024-06-17 14:15:00'),
    (4, 8, '2024-06-18 09:45:00'),
    (5, 10, '2024-06-19 13:00:00'),
    (6, 1, '2024-06-20 16:30:00'),
    (7, 3, '2024-06-21 08:00:00'),
    (8, 5, '2024-06-22 12:45:00'),
    (9, 7, '2024-06-23 10:30:00'),
    (10, 9, '2024-06-24 15:00:00');
```
## Создание таблицы ДИАГНОЗ:
```
CREATE TABLE ДИАГНОЗ (
    Пациент INT NOT NULL,
    Врач INT NOT NULL,
    Код_заболевания INT NOT NULL,
    FOREIGN KEY (Пациент) REFERENCES ПАЦИЕНТ(ID_Пациента),
    FOREIGN KEY (Врач) REFERENCES ВРАЧ(ID_Врача),
    FOREIGN KEY (Код_заболевания) REFERENCES ЗАБОЛЕВАНИЕ(Код_Заболевания),
    PRIMARY KEY (Пациент, Врач, Код_заболевания)
);
```
### Заполнение таблицы ДИАГНОЗ:
```
INSERT INTO ДИАГНОЗ (Пациент, Врач, Код_заболевания)
VALUES
    (1, 2, 1),
    (2, 4, 2),
    (3, 6, 3),
    (4, 8, 4),
    (5, 10, 5),
    (6, 1, 6),
    (7, 3, 7),
    (8, 5, 8),
    (9, 7, 9),
    (10, 9, 10);
```

# Примеры запросов

## Запрос с использованием WHERE, AND, OR:
```
SELECT *
FROM ПРИЁМ
WHERE (Дата_приёма BETWEEN '2024-06-18' AND '2024-06-22')
    AND (Врач = 1 OR Врач = 3);
```
## Запрос с использованием BETWEEN, ORDER BY:
```
SELECT *
FROM ПАЦИЕНТ
WHERE СНИЛС BETWEEN '234-567-890 12' AND '567-890-123 45
```
## Запрос с использованием GROUP BY и агрегатной функции:
```
SELECT Врач, COUNT(*) AS Количество_приёмов
FROM ПРИЁМ
GROUP BY Врач;
```
## Запрос с подзапросом и ANY или ALL:
```
SELECT *
FROM ПАЦИЕНТ
WHERE ID_Пациента IN (
    SELECT Пациент
    FROM ДИАГНОЗ
    WHERE Код_заболевания > ALL (
        SELECT Код_Заболевания
        FROM ЗАБОЛЕВАНИЕ
        WHERE Код_Заболевания >= 5
    )
);
```
## Объединенные запросы с использованием UNION/UNION ALL:
```
SELECT ID_Пациента AS Идентификатор, ФИО, 'Пациент' AS Тип
FROM ПАЦИЕНТ
UNION
SELECT ID_Врача, ФИО, 'Врач'
FROM ВРАЧ;
```
## Запрос с использованием LIKE:
```
SELECT *
FROM ЗАБОЛЕВАНИЕ
WHERE Расшифровка LIKE 'Г%';
```
## Запрос с использованием CASE:
```
SELECT *,
    CASE
        WHEN Дата_приёма > NOW() THEN 'Предстоящий прием'
        ELSE 'Прошедший прием'
    END AS Статус_приёма
FROM ПРИЁМ;
```
# Примеры операций INSERT, UPDATE, DELETE

## Пример INSERT:
```
INSERT INTO ПАЦИЕНТ (ФИО, СНИЛС)
VALUES ('Зайцева Екатерина Владимировна', '123-123-123 45');
```
## Пример UPDATE:
```
UPDATE ВРАЧ
SET Специализация = 'Отоларинголог'
WHERE ID_Врача = 2;
```
## Пример DELETE:
```
DELETE FROM ПРИЁМ
WHERE Дата_приёма < NOW();
```
# Заключение

## Итоги работы:

Создана и заполнена база данных для клиники.
Выполнены различные SQL-запросы для анализа и управления данными.

## Перспективы:

Возможность расширения функционала базы данных.
Применение полученных знаний в реальных проектах.
